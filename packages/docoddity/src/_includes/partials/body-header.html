{% from 'macros/renderNav.njk' import renderNav %}
<!-- mobile menu -->
<div id="hamburger-menu">
  <div id="hamburger-menu-overlay"></div>
  <div id="hamburger-contents">
    <header>
      <div id="left">
        <a aria-role="title" href="/">{{ docoddity.title}}</a>
        <theme-toggle></theme-toggle>

      </div>
      <button id="close-hamburger" type="button" aria-label="Close navigation bar">
        <svg viewBox="0 0 15 15" width="21" height="21"><g stroke-width="1.2"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg>
      </button>
    </header>

    <main>
      {%- set key =  page['filePathStem'].slice(1).split('/')[0]  -%}
      {% set navPages = collections.all | eleventyNavigation(key) %}
      {% if navPages.length > 0 %}
        <section>
          <button type="button" id="back-to-main-menu">‚Üê Back to main menu</button>
          {{ renderNav('hamburger-nav', navPages, page.url) }}
        </section>
      {% endif %}


      <section>
        {% for item in docoddity.nav.left %}
          <a href="{{ item.url }}" class="{{ 'active' if page.url.startsWith(item.url) and item.url != '/' }} {{ 'mobile' if item.mobile == true }}"
            >{{ item.text }}</a
          >
        {% endfor %}

        <hr />
        {% for item in docoddity.nav.right %}
          <a 
            href="{{ item.url }}" 
            target="_blank" 
            rel="noopener noreferrer" 
            aria-label="{{ item.label }}"
          >
            {{item.text}}
            {% include "partials/images/link.html" %}
          </a>
        {% endfor %}
      </section>
    </main>
  </div>
</div>

<!-- desktop menu -->
<header role="banner" class="site-head desktop">
  <div id="left">
    <button 
      id="hamburger"
      class="mobile"
      aria-label="Toggle navigation bar" 
      aria-expanded="false" 
      type="button"
    >
      <svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true">
        <path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path>
      </svg>
    </button>

    <a aria-role="title" class="mobile" href="/">{{ docoddity.title}}</a>
    {% for item in docoddity.nav.left %}
      <a href="{{ item.url }}" class="{{ 'active' if page.url.startsWith(item.url) and item.url != '/' }} {{ 'mobile' if item.mobile == true }}"
        >{{ item.text }}</a
      >
    {% endfor %}
  </div>

  <div id="right">
    {% for item in docoddity.nav.right %}
      <a 
        href="{{ item.url }}" 
        target="_blank" 
        rel="noopener noreferrer" 
        aria-label="{{ item.label }}"
      >
        {{item.text}}
        {% include "partials/images/link.html" %}
      </a>
    {% endfor %}
    <theme-toggle></theme-toggle>
    <div class="mobile" id="docsearch"></div>
  </div>

</header>
